syntax = "proto3";

package chat;

option go_package = "github.com/ave1995/grpc-chat/api/grpc/proto;proto";

message SendMessageRequest {
  Message message = 1;
}

message SendMessageResponse {
  string id = 1;
  string message = 2;
}

message GetMessageRequest {
  string id = 1;
}

message GetMessageResponse {
  Message message = 1;
}

message Message {
  string text = 1;
}


// The ChatService defines gRPC methods for chat
service ChatService {
  // Unary RPC — send a single message, get confirmation
  rpc SendMessage (SendMessageRequest) returns (SendMessageResponse);

  // Unary RPC — get a single message by ID
  rpc GetMessage (GetMessageRequest) returns (GetMessageResponse);

  // Bidirectional streaming — real-time chat
  // Uprav tu definici, ten strema v argumentu se ted nepoužívá
  rpc Chat (stream Message) returns (stream Message);
}